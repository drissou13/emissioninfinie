<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Driss et l'√âmission Infinie</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        overflow: hidden;
    }

    #game-container {
        background: rgba(0,0,0,0.8);
        padding: 20px 30px;
        border-radius: 15px;
        box-shadow: 0 0 20px #00ffff;
        max-width: 700px;
        width: 90%;
        text-align: center;
        position: relative;
        transition: box-shadow 0.1s, transform 0.1s;
    }

    h1 {
        margin-top: 0;
        font-family: 'Orbitron', sans-serif;
        color: #00ffff;
        text-shadow: 0 0 5px #0ff, 0 0 10px #0ff;
    }

    #story-text {
        font-size: 1.2em;
        min-height: 120px;
        white-space: pre-wrap;
        margin-bottom: 20px;
        color: #0ff;
        text-shadow: 0 0 3px #0ff;
    }

    .question { font-size: 1.4em; margin: 20px 0; transition: 0.5s; }

    .answers button {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 15px;
        font-size: 1.1em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
        background: linear-gradient(90deg, #00ffff, #0080ff);
        color: #000;
        font-weight: bold;
        box-shadow: 0 0 10px #0ff;
    }

    .answers button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px #0ff;
    }

    #score {
        margin-top: 20px;
        font-weight: bold;
        font-size: 1.2em;
    }

    /* Effet de progression de difficult√© */
    .question.easy { color: #00ff00; }
    .question.medium { color: #ffff00; }
    .question.hard { color: #ff4500; }
    .question.very-hard { color: #ff0000; }

</style>
</head>
<body>

<div id="game-container">
    <h1>Driss et l'√âmission Infinie</h1>

    <div id="story">
        <div id="story-text"></div>
        <button id="start-btn" style="display:none;">Commencer le jeu</button>
    </div>

    <div id="quiz" style="display:none;">
        <div class="question" id="question-text"></div>
        <div class="answers" id="answers-container"></div>
        <div id="score"></div>
    </div>

    <div id="end" style="display:none;">
        <h2 id="end-title"></h2>
        <p id="end-story"></p>
        <button id="restart-btn">Rejouer</button>
    </div>
</div>

<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="bg-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<script>
const storyLines = [
    "Driss, un homme ordinaire, se r√©veille chaque matin...",
    "Il d√©couvre qu‚Äôil est assis devant un √©cran g√©ant, exactement comme la veille.",
    "La musique d‚Äôintro r√©sonne, les lumi√®res s‚Äôallument, et l‚Äôanimateur lui sourit.",
    "Le seul moyen de se lib√©rer est de r√©pondre correctement √† au moins 10 questions sur 20."
];

let currentStoryIndex = 0;
let charIndex = 0;

const storyText = document.getElementById("story-text");
const startBtn = document.getElementById("start-btn");
const restartBtn = document.getElementById("restart-btn");
const storyDiv = document.getElementById("story");
const quizDiv = document.getElementById("quiz");
const endDiv = document.getElementById("end");
const gameContainer = document.getElementById("game-container");

const correctSound = document.getElementById("correct-sound");
const wrongSound = document.getElementById("wrong-sound");
const bgMusic = document.getElementById("bg-music");

const questions = [
    { q: "Quelle est la capitale de la France ?", a: ["Paris","Rome","Madrid"], c: 0 },
  { q: "Combien de continents existe-t-il ?", a: ["5","6","7"], c: 2 },
  { q: "Quelle plan√®te est la plus proche du Soleil ?", a: ["Mercure","V√©nus","Mars"], c: 0 },
  { q: "Combien de c√¥t√©s a un carr√© ?", a: ["3","4","5"], c: 1 },
  { q: "Quelle couleur donne bleu + jaune ?", a: ["Vert","Orange","Violet"], c: 0 },
  { q: "Qui a √©crit Les Mis√©rables ?", a: ["Victor Hugo","Zola","Camus"], c: 0 },
  { q: "Combien de joueurs au football ?", a: ["10","11","12"], c: 1 },
  { q: "Quelle est la capitale de l‚ÄôItalie ?", a: ["Rome","Milan","Venise"], c: 0 },
  { q: "Quelle est la capitale de l‚ÄôEspagne ?", a: ["Madrid","Barcelone","S√©ville"], c: 0 },
  { q: "Quelle est la monnaie du Japon ?", a: ["Yen","Won","Dollar"], c: 0 },

  { q: "Combien de plan√®tes dans le syst√®me solaire ?", a: ["7","8","9"], c: 1 },
  { q: "Quelle est la plus grande √Æle du monde ?", a: ["Groenland","Madagascar","Australie"], c: 0 },
  { q: "Qui a peint la Joconde ?", a: ["Picasso","L√©onard de Vinci","Van Gogh"], c: 1 },
  { q: "Quelle est la capitale du Canada ?", a: ["Toronto","Ottawa","Montr√©al"], c: 1 },
  { q: "Combien de secondes dans une minute ?", a: ["50","60","70"], c: 1 },
  { q: "Quelle est la capitale de l‚ÄôAllemagne ?", a: ["Munich","Berlin","Hambourg"], c: 1 },
  { q: "Quel animal est le roi de la jungle ?", a: ["Tigre","Lion","Panth√®re"], c: 1 },
  { q: "Quelle est la langue officielle du Br√©sil ?", a: ["Espagnol","Portugais","Fran√ßais"], c: 1 },
  { q: "Qui a d√©couvert l‚ÄôAm√©rique ?", a: ["Colomb","Magellan","Cook"], c: 0 },
  { q: "Combien de couleurs dans l‚Äôarc-en-ciel ?", a: ["6","7","8"], c: 1 },

  { q: "Quel est le plus grand oc√©an ?", a: ["Atlantique","Pacifique","Indien"], c: 1 },
  { q: "Combien de pattes a une araign√©e ?", a: ["6","8","10"], c: 1 },
  { q: "Quel est le symbole de l‚Äôeau ?", a: ["H2O","O2","CO2"], c: 0 },
  { q: "Quelle est la capitale de la Gr√®ce ?", a: ["Ath√®nes","Sparte","Th√®bes"], c: 0 },
  { q: "Combien de jours dans une ann√©e bissextile ?", a: ["365","366","367"], c: 1 },
  { q: "Qui a √©crit Le Petit Prince ?", a: ["Saint-Exup√©ry","Hugo","Balzac"], c: 0 },
  { q: "Quelle est la capitale du Japon ?", a: ["Kyoto","Osaka","Tokyo"], c: 2 },
  { q: "Quel m√©tal a pour symbole Au ?", a: ["Argent","Or","Aluminium"], c: 1 },
  { q: "Combien de touches a un piano ?", a: ["85","88","90"], c: 1 },
  { q: "Quelle plan√®te est rouge ?", a: ["Mars","Jupiter","Saturne"], c: 0 },

  { q: "Qui a invent√© l‚Äôampoule ?", a: ["Edison","Tesla","Newton"], c: 0 },
  { q: "Quelle est la capitale du Portugal ?", a: ["Lisbonne","Porto","Braga"], c: 0 },
  { q: "Quel est le plus grand d√©sert ?", a: ["Sahara","Gobi","Antarctique"], c: 2 },
  { q: "Combien de c√¥t√©s a un hexagone ?", a: ["5","6","7"], c: 1 },
  { q: "Quelle est la capitale de la Belgique ?", a: ["Bruxelles","Anvers","Li√®ge"], c: 0 },
  { q: "Qui a peint Guernica ?", a: ["Picasso","Dali","Matisse"], c: 0 },
  { q: "Combien de chromosomes humains ?", a: ["44","46","48"], c: 1 },
  { q: "Quelle est la capitale de la Suisse ?", a: ["Gen√®ve","Zurich","Berne"], c: 2 }
];

let currentQuestion = 0;
let score = 0;

// Typing effect for intro
function typeStory() {
    if(currentStoryIndex < storyLines.length) {
        let line = storyLines[currentStoryIndex];
        if(charIndex < line.length) {
            storyText.textContent += line.charAt(charIndex);
            charIndex++;
            setTimeout(typeStory, 30);
        } else {
            storyText.textContent += "\n\n";
            currentStoryIndex++;
            charIndex = 0;
            setTimeout(typeStory, 500);
        }
    } else {
        startBtn.style.display = "inline-block";
    }
}

startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", restartGame);

// Effet TV scintillante
function tvFlicker() {
    const intensity = Math.random() * 10; // l√©g√®re variation
    gameContainer.style.boxShadow = `0 0 ${intensity*2}px #0ff`;
    gameContainer.style.transform = `translate(${Math.random()*2}px, ${Math.random()*2}px)`;
}

function startGame() {
    storyDiv.style.display = "none";
    quizDiv.style.display = "block";
    bgMusic.play();
    showQuestion();
    flickerInterval = setInterval(tvFlicker, 100); // TV scintille
}

let flickerInterval;

function showQuestion() {
    const q = questions[currentQuestion];
    const questionText = document.getElementById("question-text");
    questionText.textContent = `Question ${currentQuestion+1}: ${q.q}`;

    if(currentQuestion < 5) questionText.className = "question easy";
    else if(currentQuestion < 10) questionText.className = "question medium";
    else if(currentQuestion < 15) questionText.className = "question hard";
    else questionText.className = "question very-hard";

    const answersContainer = document.getElementById("answers-container");
    answersContainer.innerHTML = "";
    q.a.forEach((answer, index) => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.addEventListener("click", () => selectAnswer(index));
        answersContainer.appendChild(btn);
    });
    document.getElementById("score").textContent = `Score actuel: ${score}`;
}

function selectAnswer(index) {
    if(index === questions[currentQuestion].correct) {
        score++;
        correctSound.play();
    } else {
        wrongSound.play();
    }
    currentQuestion++;
    if(currentQuestion < questions.length) {
        showQuestion();
    } else {
        endGame();
    }
}

function endGame() {
    quizDiv.style.display = "none";
    endDiv.style.display = "block";
    clearInterval(flickerInterval);
    bgMusic.pause();
    bgMusic.currentTime = 0;

    const endTitle = document.getElementById("end-title");
    const endStory = document.getElementById("end-story");

    if(score >= 10) {
        endTitle.textContent = "Lib√©ration ! üéâ";
        endStory.textContent = `Driss a r√©pondu correctement √† ${score} questions. Merci d‚Äôavoir jou√© !\nLa TV s‚Äô√©teint‚Ä¶`;
        // TV off effect
        document.body.style.transition = "background 2s, color 2s";
        document.body.style.background = "black";
        document.body.style.color = "black";
        gameContainer.style.transition = "opacity 2s";
        gameContainer.style.opacity = 0;
    } else {
        endTitle.textContent = "Encore coinc√©... üò¢";
        endStory.textContent = `Driss n‚Äôa r√©pondu correctement qu‚Äô√† ${score} questions.\nLa boucle recommence‚Ä¶`;
        setTimeout(() => {
            location.reload();
        }, 3000);
    }
}

function restartGame() {
    currentQuestion = 0;
    score = 0;
    endDiv.style.display = "none";
    storyDiv.style.display = "block";
    storyText.textContent = "";
    currentStoryIndex = 0;
    charIndex = 0;
    startBtn.style.display = "none";
    typeStory();
}

typeStory();
</script>

</body>
</html>
