<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Driss et l'√âmission Infinie</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        overflow: hidden;
    }

    #game-container {
        background: rgba(0,0,0,0.85);
        padding: 20px 30px;
        border-radius: 15px;
        box-shadow: 0 0 20px #00ffff;
        max-width: 700px;
        width: 90%;
        text-align: center;
        position: relative;
        transition: box-shadow 0.1s, transform 0.1s;
    }

    h1 {
        margin-top: 0;
        font-family: 'Orbitron', sans-serif;
        color: #00ffff;
        text-shadow: 0 0 5px #0ff, 0 0 10px #0ff;
    }

    #story-text {
        font-size: 1.2em;
        min-height: 120px;
        white-space: pre-wrap;
        margin-bottom: 20px;
        color: #0ff;
        text-shadow: 0 0 3px #0ff;
    }

    .question { font-size: 1.4em; margin: 20px 0; transition: 0.5s; }

    .answers button {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 15px;
        font-size: 1.1em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
        background: linear-gradient(90deg, #00ffff, #0080ff);
        color: #000;
        font-weight: bold;
        box-shadow: 0 0 10px #0ff;
    }

    .answers button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px #0ff;
    }

    #score {
        margin-top: 20px;
        font-weight: bold;
        font-size: 1.2em;
    }

    #comment {
        margin-top: 15px;
        font-style: italic;
        color: #ff0;
        min-height: 20px;
    }

    /* Couleurs par difficult√© */
    .question.easy { color: #00ff00; }
    .question.medium { color: #ffff00; }
    .question.hard { color: #ff4500; }
    .question.very-hard { color: #ff0000; }
</style>
</head>
<body>

<div id="game-container">
    <h1>Driss et l'√âmission Infinie</h1>

    <div id="story">
        <div id="story-text"></div>
        <button id="start-btn" style="display:none;">Commencer le jeu</button>
    </div>

    <div id="quiz" style="display:none;">
        <div class="question" id="question-text"></div>
        <div class="answers" id="answers-container"></div>
        <div id="score"></div>
        <div id="comment"></div>
    </div>

    <div id="end" style="display:none;">
        <h2 id="end-title"></h2>
        <p id="end-story"></p>
        <button id="restart-btn">Rejouer</button>
    </div>
</div>

<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="bg-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<script>
const storyLines = [
    "Driss se r√©veille un matin et d√©couvre un √©cran g√©ant devant lui...",
    "Une musique kitsch r√©sonne et un animateur appara√Æt avec un sourire‚Ä¶ un peu trop confiant.",
    "Driss comprend vite qu'il est coinc√© dans cette √©mission.",
    "Le seul moyen de sortir est de r√©pondre correctement √† au moins 10 questions sur 20."
];

let currentStoryIndex = 0;
let charIndex = 0;

const storyText = document.getElementById("story-text");
const startBtn = document.getElementById("start-btn");
const restartBtn = document.getElementById("restart-btn");
const storyDiv = document.getElementById("story");
const quizDiv = document.getElementById("quiz");
const endDiv = document.getElementById("end");
const gameContainer = document.getElementById("game-container");
const commentDiv = document.getElementById("comment");

const correctSound = document.getElementById("correct-sound");
const wrongSound = document.getElementById("wrong-sound");
const bgMusic = document.getElementById("bg-music");

// Questions avec r√©ponses et remarques humoristiques
const questions = [
    {q:"Quelle est la capitale de la France ?", a:["Londres","Paris","Rome"], correct:1, comment:["Oups, m√™me pas en r√™ve‚Ä¶","Parfait ! Tu sais lire une carte !","Hmm‚Ä¶ pas tout √† fait."]},
    {q:"Combien de continents y a-t-il sur Terre ?", a:["5","6","7"], correct:2, comment:["Trop peu‚Ä¶","Pas encore !","Exact ! Bravo !"]},
    {q:"Quelle couleur obtient-on en m√©langeant du bleu et du jaune ?", a:["Vert","Orange","Violet"], correct:0, comment:["Non‚Ä¶ pas celui-l√†.","Incorrect !","Oui, simple et efficace !"]},
    {q:"Combien de c√¥t√©s a un triangle ?", a:["3","4","5"], correct:0, comment:["Non, Driss !","Encore rat√© !","Oui, un triangle c‚Äôest 3 !"]},
    {q:"Quel animal est connu comme le roi de la jungle ?", a:["Tigre","Lion","√âl√©phant"], correct:1, comment:["Pas vraiment‚Ä¶","Non !","Exact, c‚Äôest bien le lion !"]},
    {q:"Qui a √©crit Les Mis√©rables ?", a:["Victor Hugo","√âmile Zola","Albert Camus"], correct:0, comment:["Faux‚Ä¶","Pas cette fois.","Oui ! Victor Hugo !"]},
    {q:"Quelle plan√®te est la plus proche du Soleil ?", a:["Mercure","V√©nus","Mars"], correct:0, comment:["Non !","Faux‚Ä¶","Exact ! Mercure !"]},
    {q:"Quel est le symbole chimique de l‚Äôeau ?", a:["O‚ÇÇ","CO‚ÇÇ","H‚ÇÇO"], correct:2, comment:["Pas du tout !","Non‚Ä¶","Parfait, H‚ÇÇO !"]},
    {q:"Combien de joueurs y a-t-il dans une √©quipe de football sur le terrain ?", a:["10","11","12"], correct:1, comment:["Presque‚Ä¶","Non !","Oui, 11 joueurs !"]},
    {q:"Dans quel pays se trouve la ville de Kyoto ?", a:["Chine","Japon","Cor√©e du Sud"], correct:1, comment:["Faux !","Non‚Ä¶","Exact, c‚Äôest au Japon !"]},
];

let currentQuestion = 0;
let score = 0;

// Typing effect
function typeStory() {
    if(currentStoryIndex < storyLines.length) {
        let line = storyLines[currentStoryIndex];
        if(charIndex < line.length) {
            storyText.textContent += line.charAt(charIndex);
            charIndex++;
            setTimeout(typeStory, 30);
        } else {
            storyText.textContent += "\n\n";
            currentStoryIndex++;
            charIndex = 0;
            setTimeout(typeStory, 500);
        }
    } else {
        startBtn.style.display = "inline-block";
    }
}

startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", restartGame);

// Effet l√©ger TV
function tvFlicker() {
    const intensity = Math.random() * 10;
    gameContainer.style.boxShadow = `0 0 ${intensity*2}px #0ff`;
    gameContainer.style.transform = `translate(${Math.random()*2}px, ${Math.random()*2}px)`;
}

let flickerInterval;

function startGame() {
    storyDiv.style.display = "none";
    quizDiv.style.display = "block";
    bgMusic.play();
    flickerInterval = setInterval(tvFlicker, 100);
    showQuestion();
}

function showQuestion() {
    const q = questions[currentQuestion];
    const questionText = document.getElementById("question-text");
    questionText.textContent = `Question ${currentQuestion+1}: ${q.q}`;

    if(currentQuestion < 3) questionText.className = "question easy";
    else if(currentQuestion < 6) questionText.className = "question medium";
    else questionText.className = "question hard";

    const answersContainer = document.getElementById("answers-container");
    answersContainer.innerHTML = "";
    q.a.forEach((answer, index) => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.addEventListener("click", () => selectAnswer(index));
        answersContainer.appendChild(btn);
    });
    document.getElementById("score").textContent = `Score actuel: ${score}`;
    commentDiv.textContent = "";
}

function selectAnswer(index) {
    const q = questions[currentQuestion];
    if(index === q.correct) {
        score++;
        correctSound.play();
    } else {
        wrongSound.play();
    }
    commentDiv.textContent = q.comment[index];

    currentQuestion++;
    if(currentQuestion < questions.length) {
        setTimeout(showQuestion, 800); // laisse le temps de lire la remarque
    } else {
        setTimeout(endGame, 1000);
    }
}

function endGame() {
    quizDiv.style.display = "none";
    endDiv.style.display = "block";
    clearInterval(flickerInterval);
    bgMusic.pause();
    bgMusic.currentTime = 0;

    const endTitle = document.getElementById("end-title");
    const endStory = document.getElementById("end-story");

    if(score >= 10) {
        endTitle.textContent = "Lib√©ration ! üéâ";
        endStory.textContent = `Driss a r√©pondu correctement √† ${score} questions. Merci d‚Äôavoir jou√© !\nLa TV s‚Äô√©teint‚Ä¶`;
        document.body.style.transition = "background 2s, color 2s";
        document.body.style.background = "black";
        document.body.style.color = "black";
        gameContainer.style.transition = "opacity 2s";
        gameContainer.style.opacity = 0;
    } else {
        endTitle.textContent = "Encore coinc√©... üò¢";
        endStory.textContent = `Driss n‚Äôa r√©pondu correctement qu‚Äô√† ${score} questions.\nLa boucle recommence‚Ä¶`;
        setTimeout(restartGame, 3000);
    }
}

function restartGame() {
    currentQuestion = 0;
    score = 0;
    currentStoryIndex = 0;
    charIndex = 0;
    storyText.textContent = "";
    startBtn.style.display = "none";
    endDiv.style.display = "none";
    storyDiv.style.display = "block";
    typeStory();
}

typeStory();
</script>

</body>
</html>
